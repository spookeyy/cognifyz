<%- include('layout', { title: 'API Demo' }) -%>

<div class="card mt-4">
  <div class="card-header">
    External API Integration
  </div>
  <div class="card-body">
    <% if (!hasToken) { %>
      <div class="alert alert-warning">
        You need to authenticate with the external API first.
        <a href="<%= authUrl %>" class="btn btn-primary ms-3">Connect API</a>
      </div>
    <% } else { %>
      <form id="api-request-form">
        <div class="mb-3">
          <label for="api-query" class="form-label">API Query</label>
          <input type="text" class="form-control" id="api-query" required>
        </div>
        <button type="submit" class="btn btn-primary">Fetch Data</button>
      </form>
      
      <div id="api-results" class="mt-4">
        <!-- Results will be inserted here by main.js -->
      </div>
      
      <div class="mt-3">
        <h5>Rate Limit Status</h5>
        <div id="rate-limit-status" class="alert alert-info">
          Loading rate limit information...
        </div>
      </div>
    <% } %>
  </div>
</div>